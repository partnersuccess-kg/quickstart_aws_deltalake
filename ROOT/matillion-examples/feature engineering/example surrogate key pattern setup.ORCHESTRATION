{"job":{"components":{"391688":{"id":391688,"inputCardinality":"ZERO","outputCardinality":"MANY","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":444132438,"x":-128,"y":0,"width":32,"height":32,"inputConnectorIDs":[],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[391699],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Start 0"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"391690":{"id":391690,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-798585337,"x":320,"y":0,"width":32,"height":32,"inputConnectorIDs":[391697],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Initial sample data"}}}},"visible":true},"2":{"slot":2,"name":"SQL Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"INSERT INTO `${examples_database}`.`dim_surrogate_key_example`\nVALUES\n    (40,  'AAA', 'x',   'somevalue'),\n    (2,   'AAA', 'y',   'somevalue'),\n    (168, 'B',   'b',   'somevalue'),\n    (13,  'CC',  'abc', 'somevalue')\n"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"391691":{"id":391691,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":1611478312,"x":176,"y":0,"width":32,"height":32,"inputConnectorIDs":[391696],"outputSuccessConnectorIDs":[391697],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Create dim_surrogate_key_example"}}}},"visible":true},"2":{"slot":2,"name":"Create Method","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Replace"}}}},"visible":true},"3":{"slot":3,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${examples_database}"}}}},"visible":true},"4":{"slot":4,"name":"Table Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"dim_surrogate_key_example"}}}},"visible":true},"5":{"slot":5,"name":"Table Metadata","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"sk"},"2":{"slot":2,"type":"STRING","value":"INTEGER"},"3":{"slot":3,"type":"STRING","value":"8"},"4":{"slot":4,"type":"STRING","value":""},"5":{"slot":5,"type":"STRING","value":""}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"bus_key_part1"},"2":{"slot":2,"type":"STRING","value":"TEXT"},"3":{"slot":3,"type":"STRING","value":""},"4":{"slot":4,"type":"STRING","value":""},"5":{"slot":5,"type":"STRING","value":""}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"bus_key_part2"},"2":{"slot":2,"type":"STRING","value":"TEXT"},"3":{"slot":3,"type":"STRING","value":""},"4":{"slot":4,"type":"STRING","value":""},"5":{"slot":5,"type":"STRING","value":""}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"some_attribute"},"2":{"slot":2,"type":"STRING","value":"TEXT"},"3":{"slot":3,"type":"STRING","value":""},"4":{"slot":4,"type":"STRING","value":""},"5":{"slot":5,"type":"STRING","value":""}}}},"visible":true},"6":{"slot":6,"name":"Table Type","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Managed"}}}},"visible":true},"7":{"slot":7,"name":"Using","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Delta"}}}},"visible":false},"8":{"slot":8,"name":"Location","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"s3://<bucket>/<path>"}}}},"visible":false},"9":{"slot":9,"name":"Partition Keys","elements":{},"visible":true},"10":{"slot":10,"name":"Table Properties","elements":{},"visible":true},"11":{"slot":11,"name":"Comment","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"391700":{"id":391700,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-30576485,"x":16,"y":0,"width":32,"height":32,"inputConnectorIDs":[391699],"outputSuccessConnectorIDs":[391696],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Check variables"}}}},"visible":true},"2":{"slot":2,"name":"Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"# Check that the variable examples_database exists\n\nif [ -z \"${examples_database}\" ]\nthen\n\techo \"You must set a default value for examples_database under Project / Manage Environment Variables\"\n    exit 99\nelse\n\techo \"examples_database = '${examples_database}'\"\nfi\n"}}}},"visible":true},"3":{"slot":3,"name":"Timeout","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"360"}}}},"visible":true},"4":{"slot":4,"name":"User","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Restricted"}}}},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]}},"successConnectors":{"391696":{"id":391696,"sourceID":391700,"targetID":391691},"391697":{"id":391697,"sourceID":391691,"targetID":391690}},"failureConnectors":{},"unconditionalConnectors":{"391699":{"id":391699,"sourceID":391688,"targetID":391700}},"trueConnectors":{},"falseConnectors":{},"iterationConnectors":{},"noteConnectors":{},"notes":{"391689":{"id":391689,"x":-544,"y":-265,"width":738,"height":158,"text":"Start here!\n* Run this job once to set up the initial data\n* Afterwards open the **example surrogate key pattern transform** job and run it\n* First time through, there are new surrogate keys to insert\n* Second time, there are no new records\n\nThese are the example jobs from the Developer Relations articles on Star Schema design and development:\n * Creating Dimension tables in [[https://www.matillion.com/resources/blog/building-a-star-schema-with-matillion]]\n * Tip 3 in [[https://www.matillion.com/resources/developer-relations/top-10-tips-for-creating-dimension-tables-using-matillion]]\n","colour":"00ce4f"},"391694":{"id":391694,"x":-543,"y":-29,"width":349,"height":59,"text":"You **must** supply a default value for the following variable:\n\n**examples_database** (name of the Database to use)\n","colour":"f9c21b"}},"variables":{},"grids":{}},"info":{"name":"example surrogate key pattern setup","description":"Setup for the Surrogate Key example","type":"ORCHESTRATION","tag":"72335846-4db7-43cf-837d-0d0e5d904e0d"}}