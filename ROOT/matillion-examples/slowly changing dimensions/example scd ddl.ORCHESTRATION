{"job":{"components":{"391856":{"id":391856,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":-30576485,"x":-416,"y":160,"width":32,"height":32,"inputConnectorIDs":[391867],"outputSuccessConnectorIDs":[391864,391865,391871],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Check variables"}}}},"visible":true},"2":{"slot":2,"name":"Script","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"# Check that the variables examples_storage and examples_database exist\n# and have valid default values\n\nif [ -z \"${examples_storage}\" ]\nthen\n\techo \"You must set a default value for examples_storage under Project / Manage Environment Variables\"\n    exit 99\nelse\n\techo \"examples_storage = '${examples_storage}'\"\nfi\n\nif [[ ${examples_storage} == s3* ]]\nthen\n\techo \"The default value for examples_storage must not start with s3://\"\n    exit 99\nfi\n\nif [ -z \"${examples_database}\" ]\nthen\n\techo \"You must set a default value for examples_database under Project / Manage Environment Variables\"\n    exit 99\nelse\n\techo \"examples_database = '${examples_database}'\"\nfi\n"}}}},"visible":true},"3":{"slot":3,"name":"Timeout","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"360"}}}},"visible":true},"4":{"slot":4,"name":"User","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Restricted"}}}},"visible":false}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"391857":{"id":391857,"inputCardinality":"ZERO","outputCardinality":"MANY","connectorHint":"UNCONDITIONAL","executionHint":"FLOW","implementationID":444132438,"x":-592,"y":160,"width":32,"height":32,"inputConnectorIDs":[],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[391867],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Start 0"}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"391858":{"id":391858,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":1611478312,"x":-96,"y":64,"width":32,"height":32,"inputConnectorIDs":[391871],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Create dim_worldclockapi_type2"}}}},"visible":true},"2":{"slot":2,"name":"Create Method","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Replace"}}}},"visible":true},"3":{"slot":3,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${examples_database}"}}}},"visible":true},"4":{"slot":4,"name":"Table Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"dim_worldclockapi_type2"}}}},"visible":true},"5":{"slot":5,"name":"Table Metadata","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"sk"},"2":{"slot":2,"type":"STRING","value":"TEXT"},"3":{"slot":3,"type":"STRING","value":""},"4":{"slot":4,"type":"STRING","value":""},"5":{"slot":5,"type":"STRING","value":"Surrogate Key"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"timeZoneName"},"2":{"slot":2,"type":"STRING","value":"TEXT"},"3":{"slot":3,"type":"STRING","value":""},"4":{"slot":4,"type":"STRING","value":""},"5":{"slot":5,"type":"STRING","value":""}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"currentDateTime"},"2":{"slot":2,"type":"STRING","value":"TEXT"},"3":{"slot":3,"type":"STRING","value":""},"4":{"slot":4,"type":"STRING","value":""},"5":{"slot":5,"type":"STRING","value":null}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"currentFileTime"},"2":{"slot":2,"type":"STRING","value":"NUMBER"},"3":{"slot":3,"type":"STRING","value":"20"},"4":{"slot":4,"type":"STRING","value":"0"},"5":{"slot":5,"type":"STRING","value":null}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"dayOfTheWeek"},"2":{"slot":2,"type":"STRING","value":"TEXT"},"3":{"slot":3,"type":"STRING","value":""},"4":{"slot":4,"type":"STRING","value":""},"5":{"slot":5,"type":"STRING","value":null}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"ValidFrom"},"2":{"slot":2,"type":"STRING","value":"TIMESTAMP"},"3":{"slot":3,"type":"STRING","value":""},"4":{"slot":4,"type":"STRING","value":""},"5":{"slot":5,"type":"STRING","value":""}}},"7":{"slot":7,"values":{"1":{"slot":1,"type":"STRING","value":"ValidTo"},"2":{"slot":2,"type":"STRING","value":"TIMESTAMP"},"3":{"slot":3,"type":"STRING","value":""},"4":{"slot":4,"type":"STRING","value":""},"5":{"slot":5,"type":"STRING","value":""}}},"8":{"slot":8,"values":{"1":{"slot":1,"type":"STRING","value":"Version"},"2":{"slot":2,"type":"STRING","value":"INTEGER"},"3":{"slot":3,"type":"STRING","value":"8"},"4":{"slot":4,"type":"STRING","value":""},"5":{"slot":5,"type":"STRING","value":""}}},"9":{"slot":9,"values":{"1":{"slot":1,"type":"STRING","value":"CurrentFlag"},"2":{"slot":2,"type":"STRING","value":"BOOLEAN"},"3":{"slot":3,"type":"STRING","value":""},"4":{"slot":4,"type":"STRING","value":""},"5":{"slot":5,"type":"STRING","value":""}}}},"visible":true},"6":{"slot":6,"name":"Table Type","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Managed"}}}},"visible":true},"7":{"slot":7,"name":"Using","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Delta"}}}},"visible":false},"8":{"slot":8,"name":"Location","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"s3://<bucket>/<path>"}}}},"visible":false},"9":{"slot":9,"name":"Partition Keys","elements":{},"visible":true},"10":{"slot":10,"name":"Table Properties","elements":{},"visible":true},"11":{"slot":11,"name":"Comment","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"391859":{"id":391859,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":1611478312,"x":-96,"y":-96,"width":32,"height":32,"inputConnectorIDs":[391864],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Create dim_worldclockapi_type1"}}}},"visible":true},"2":{"slot":2,"name":"Create Method","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Replace"}}}},"visible":true},"3":{"slot":3,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${examples_database}"}}}},"visible":true},"4":{"slot":4,"name":"Table Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"dim_worldclockapi_type1"}}}},"visible":true},"5":{"slot":5,"name":"Table Metadata","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"timeZoneName"},"2":{"slot":2,"type":"STRING","value":"TEXT"},"3":{"slot":3,"type":"INTEGER","value":"20"},"4":{"slot":4,"type":"INTEGER","value":""},"5":{"slot":5,"type":"STRING","value":null}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"currentDateTime"},"2":{"slot":2,"type":"STRING","value":"TEXT"},"3":{"slot":3,"type":"INTEGER","value":"64"},"4":{"slot":4,"type":"INTEGER","value":""},"5":{"slot":5,"type":"STRING","value":null}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"currentFileTime"},"2":{"slot":2,"type":"STRING","value":"NUMBER"},"3":{"slot":3,"type":"INTEGER","value":"20"},"4":{"slot":4,"type":"INTEGER","value":"0"},"5":{"slot":5,"type":"STRING","value":null}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"dayOfTheWeek"},"2":{"slot":2,"type":"STRING","value":"TEXT"},"3":{"slot":3,"type":"INTEGER","value":"20"},"4":{"slot":4,"type":"INTEGER","value":""},"5":{"slot":5,"type":"STRING","value":null}}}},"visible":true},"6":{"slot":6,"name":"Table Type","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Managed"}}}},"visible":true},"7":{"slot":7,"name":"Using","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Delta"}}}},"visible":false},"8":{"slot":8,"name":"Location","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"s3://<bucket>/<path>"}}}},"visible":false},"9":{"slot":9,"name":"Partition Keys","elements":{},"visible":true},"10":{"slot":10,"name":"Table Properties","elements":{},"visible":true},"11":{"slot":11,"name":"Comment","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"391868":{"id":391868,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"TRANSFORM","implementationID":1896325668,"x":288,"y":208,"width":32,"height":32,"inputConnectorIDs":[391870],"outputSuccessConnectorIDs":[],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"example scd ddl virtualization 0"}}}},"visible":true},"2":{"slot":2,"name":"Transformation Job","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"example scd ddl virtualization"}}}},"visible":true},"3":{"slot":3,"name":"","elements":{},"visible":false},"4":{"slot":4,"name":"Set Scalar Variables","elements":{},"visible":true},"5":{"slot":5,"name":"Set Grid Variables","elements":{},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]},"391869":{"id":391869,"inputCardinality":"ONE","outputCardinality":"MANY","connectorHint":"SUCCESS_FAIL","executionHint":"EXECUTE","implementationID":1611478312,"x":-96,"y":208,"width":32,"height":32,"inputConnectorIDs":[391865],"outputSuccessConnectorIDs":[391870],"outputFailureConnectorIDs":[],"outputUnconditionalConnectorIDs":[],"outputTrueConnectorIDs":[],"outputFalseConnectorIDs":[],"exportMappings":{},"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Create norm_worldclockapi_history"}}}},"visible":true},"2":{"slot":2,"name":"Create Method","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Replace"}}}},"visible":true},"3":{"slot":3,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${examples_database}"}}}},"visible":true},"4":{"slot":4,"name":"Table Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"norm_worldclockapi_history"}}}},"visible":true},"5":{"slot":5,"name":"Table Metadata","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"sk"},"2":{"slot":2,"type":"STRING","value":"TEXT"},"3":{"slot":3,"type":"STRING","value":""},"4":{"slot":4,"type":"STRING","value":""},"5":{"slot":5,"type":"STRING","value":"Surrogate Key"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"timeZoneName"},"2":{"slot":2,"type":"STRING","value":"TEXT"},"3":{"slot":3,"type":"STRING","value":""},"4":{"slot":4,"type":"STRING","value":""},"5":{"slot":5,"type":"STRING","value":""}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"AsAt"},"2":{"slot":2,"type":"STRING","value":"TIMESTAMP"},"3":{"slot":3,"type":"STRING","value":""},"4":{"slot":4,"type":"STRING","value":""},"5":{"slot":5,"type":"STRING","value":""}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"currentDateTime"},"2":{"slot":2,"type":"STRING","value":"TEXT"},"3":{"slot":3,"type":"STRING","value":""},"4":{"slot":4,"type":"STRING","value":""},"5":{"slot":5,"type":"STRING","value":null}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"currentFileTime"},"2":{"slot":2,"type":"STRING","value":"NUMBER"},"3":{"slot":3,"type":"STRING","value":"20"},"4":{"slot":4,"type":"STRING","value":"0"},"5":{"slot":5,"type":"STRING","value":null}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"dayOfTheWeek"},"2":{"slot":2,"type":"STRING","value":"TEXT"},"3":{"slot":3,"type":"STRING","value":""},"4":{"slot":4,"type":"STRING","value":""},"5":{"slot":5,"type":"STRING","value":null}}}},"visible":true},"6":{"slot":6,"name":"Table Type","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Managed"}}}},"visible":true},"7":{"slot":7,"name":"Using","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Delta"}}}},"visible":false},"8":{"slot":8,"name":"Location","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"s3://<bucket>/<path>"}}}},"visible":false},"9":{"slot":9,"name":"Partition Keys","elements":{},"visible":true},"10":{"slot":10,"name":"Table Properties","elements":{},"visible":true},"11":{"slot":11,"name":"Comment","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":true}},"expectedFailure":null,"activationStatus":"ENABLED","outputIterationConnectorIDs":[],"inputIterationConnectorIDs":[]}},"successConnectors":{"391864":{"id":391864,"sourceID":391856,"targetID":391859},"391865":{"id":391865,"sourceID":391856,"targetID":391869},"391870":{"id":391870,"sourceID":391869,"targetID":391868},"391871":{"id":391871,"sourceID":391856,"targetID":391858}},"failureConnectors":{},"unconditionalConnectors":{"391867":{"id":391867,"sourceID":391857,"targetID":391856}},"trueConnectors":{},"falseConnectors":{},"iterationConnectors":{},"noteConnectors":{},"notes":{"391851":{"id":391851,"x":-193,"y":-258,"width":529,"height":76,"text":"This is the DDL for:\n* all the variations of the physical SCD tables\n * the backing table for the virtualized dimensions\n * the virtualized dimensions themselves (views)","colour":"00ce4f"},"391854":{"id":391854,"x":-1061,"y":86,"width":394,"height":130,"text":"You **must** supply a default value for the following variables:\n\n**examples_storage** (E.g. if your S3 bucket is named s3://the-bucket then set the default value to **the-bucket**)\n\n**examples_database** (name of the Database to use)\n","colour":"f9c21b"},"391855":{"id":391855,"x":-1062,"y":-259,"width":543,"height":281,"text":"These are the example jobs from the Slowly Changing Dimension (SCD) article at [[https://www.matillion.com/resources/blog/data-warehouse-time-variance-with-matillion-etl]]\n\nStart here! Run this job first to create the database objects\nThen run **example scd extract and load** many times, to load initial data and build up some history\nAfterwards use the **example scd viewer** job to sample the data\n\nThe jobs demonstrate two different methods of managing Slowly Changing Dimensions:\n1. Physical dimension tables (type 1 and type 2)\n2. Virtualized dimension tables (type 1, type 2, type 3 and type 6)\n\nVirtualizing the dimensions is generally simpler overall, but requires a backing table - norm_worldclockapi_history in this example. For more information on this subject, please take a look at [[https://www.matillion.com/resources/blog/multi-tier-data-architectures-with-matillion-etl]]\n\nMore information on implementing star schemas with Matillion is available at:\n[[https://www.matillion.com/resources/blog/building-a-star-schema-with-matillion]]\n[[https://www.matillion.com/resources/blog/top-10-tips-for-creating-dimension-tables-using-matillion]]\n[[https://www.matillion.com/resources/blog/top-10-tips-for-creating-fact-tables-using-matillion]]","colour":"00ce4f"},"391860":{"id":391860,"x":-191,"y":-17,"width":512,"height":141,"text":"The Type 2 dimension","colour":"00ce4f"},"391861":{"id":391861,"x":-192,"y":-147,"width":245,"height":102,"text":"The Type 1 dimension","colour":"00ce4f"},"391862":{"id":391862,"x":179,"y":153,"width":184,"height":111,"text":"The virtualized dimensions","colour":"00ce4f"},"391863":{"id":391863,"x":-190,"y":154,"width":329,"height":109,"text":"The backing table for the virtualized dimensions","colour":"00ce4f"}},"variables":{},"grids":{}},"info":{"name":"example scd ddl","description":null,"type":"ORCHESTRATION","tag":"fa891354-b160-4671-b2cb-732794ce70fb"}}