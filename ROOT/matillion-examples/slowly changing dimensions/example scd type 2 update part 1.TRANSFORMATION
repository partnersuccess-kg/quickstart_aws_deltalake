{"job":{"components":{"391800":{"id":391800,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":2139809017,"x":1024,"y":320,"width":32,"height":32,"inputConnectorIDs":[391820],"outputConnectorIDs":[391817],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Rank 0"}}}},"visible":true},"2":{"slot":2,"name":"Include input columns.","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true},"3":{"slot":3,"name":"Partition Data","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"timeZoneName"}}}},"visible":true},"4":{"slot":4,"name":"Ordering within partitions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"currentDateTime"},"2":{"slot":2,"type":"STRING","value":"Desc"}}}},"visible":true},"5":{"slot":5,"name":"Functions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Row Number"},"2":{"slot":2,"type":"STRING","value":"rn"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"391808":{"id":391808,"inputCardinality":"ZERO","outputCardinality":"MANY","implementationID":1354890871,"x":800,"y":464,"width":32,"height":32,"inputConnectorIDs":[],"outputConnectorIDs":[391821],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"dim_worldclockapi_type2"}}}},"visible":true},"2":{"slot":2,"name":"Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"dim_worldclockapi_type2"}}}},"visible":true},"3":{"slot":3,"name":"Column Names","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"sk"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"timeZoneName"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"currentDateTime"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"currentFileTime"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"dayOfTheWeek"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"ValidFrom"}}},"7":{"slot":7,"values":{"1":{"slot":1,"type":"STRING","value":"ValidTo"}}},"8":{"slot":8,"values":{"1":{"slot":1,"type":"STRING","value":"Version"}}},"9":{"slot":9,"values":{"1":{"slot":1,"type":"STRING","value":"CurrentFlag"}}}},"visible":true},"5":{"slot":5,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${examples_database}"}}}},"visible":true},"6":{"slot":6,"name":"Offset Type","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"None"}}}},"visible":true},"7":{"slot":7,"name":"Offset","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"8":{"slot":8,"name":"Offset","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"391809":{"id":391809,"inputCardinality":"ZERO","outputCardinality":"MANY","implementationID":1354890871,"x":800,"y":320,"width":32,"height":32,"inputConnectorIDs":[],"outputConnectorIDs":[391820],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"stg_worldclockapi_utc"}}}},"visible":true},"2":{"slot":2,"name":"Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"stg_worldclockapi_utc"}}}},"visible":true},"3":{"slot":3,"name":"Column Names","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"currentDateTime"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"currentFileTime"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"dayOfTheWeek"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"timeZoneName"}}}},"visible":true},"5":{"slot":5,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${examples_database}"}}}},"visible":true},"6":{"slot":6,"name":"Offset Type","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"None"}}}},"visible":true},"7":{"slot":7,"name":"Offset","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"8":{"slot":8,"name":"Offset","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"391811":{"id":391811,"inputCardinality":"TWO","outputCardinality":"MANY","implementationID":-359894709,"x":1376,"y":384,"width":32,"height":32,"inputConnectorIDs":[391816,391822],"outputConnectorIDs":[391810],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Detect Changes 1"}}}},"visible":true},"2":{"slot":2,"name":"Master Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Current only"}}}},"visible":true},"3":{"slot":3,"name":"Match Keys","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"timezonename"}}}},"visible":true},"4":{"slot":4,"name":"Compare Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"currentdatetime"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"currentfiletime"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"dayoftheweek"}}}},"visible":true},"5":{"slot":5,"name":"Output Column Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"master_currentdatetime"},"2":{"slot":2,"type":"STRING","value":"master_currentdatetime"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"compare_currentdatetime"},"2":{"slot":2,"type":"STRING","value":"compare_currentdatetime"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"master_currentfiletime"},"2":{"slot":2,"type":"STRING","value":"master_currentfiletime"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"compare_currentfiletime"},"2":{"slot":2,"type":"STRING","value":"compare_currentfiletime"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"master_dayoftheweek"},"2":{"slot":2,"type":"STRING","value":"master_dayoftheweek"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"compare_dayoftheweek"},"2":{"slot":2,"type":"STRING","value":"compare_dayoftheweek"}}},"7":{"slot":7,"values":{"1":{"slot":1,"type":"STRING","value":"master_version"},"2":{"slot":2,"type":"STRING","value":"prior_version"}}}},"visible":true},"6":{"slot":6,"name":"Indicator Column","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Indicator"}}}},"visible":true},"7":{"slot":7,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"391812":{"id":391812,"inputCardinality":"ZERO_OR_MANY","outputCardinality":"MANY","implementationID":-1266674941,"x":1152,"y":464,"width":32,"height":32,"inputConnectorIDs":[391821],"outputConnectorIDs":[391816],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Current only"}}}},"visible":true},"2":{"slot":2,"name":"SQL Query","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"SELECT *\nFROM $T{dim_worldclockapi_type2}\nWHERE `CurrentFlag`"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"391813":{"id":391813,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":-1760161015,"x":1152,"y":320,"width":32,"height":32,"inputConnectorIDs":[391817],"outputConnectorIDs":[391822],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Deduplicate"}}}},"visible":true},"2":{"slot":2,"name":"Filter Conditions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"rn"},"2":{"slot":2,"type":"STRING","value":"Is"},"3":{"slot":3,"type":"STRING","value":"Equal to"},"4":{"slot":4,"type":"STRING","value":"1"}}}},"visible":true},"3":{"slot":3,"name":"Combine Conditions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"AND"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"391814":{"id":391814,"inputCardinality":"ONE","outputCardinality":"ZERO","implementationID":335239424,"x":1728,"y":384,"width":32,"height":32,"inputConnectorIDs":[391823],"outputConnectorIDs":[],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Rewrite tmp Table"}}}},"visible":true},"2":{"slot":2,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${examples_database}"}}}},"visible":true},"3":{"slot":3,"name":"Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"tmp_worldclockapi_utc_delta"}}}},"visible":true},"4":{"slot":4,"name":"Partition Keys","elements":{},"visible":true},"5":{"slot":5,"name":"Table Properties","elements":{},"visible":true},"6":{"slot":6,"name":"Comment","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"},"391815":{"id":391815,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":1716658327,"x":1536,"y":384,"width":32,"height":32,"inputConnectorIDs":[391810],"outputConnectorIDs":[391823],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Add load date"}}}},"visible":true},"2":{"slot":2,"name":"Include Input Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true},"3":{"slot":3,"name":"Calculations","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"DATE_TRUNC('SECOND', CURRENT_TIMESTAMP())"},"2":{"slot":2,"type":"STRING","value":"load_timestamp"}}}},"visible":true}},"exportMappings":{},"expectedFailure":null,"activationStatus":"ENABLED"}},"connectors":{"391810":{"id":391810,"sourceID":391811,"targetID":391815},"391816":{"id":391816,"sourceID":391812,"targetID":391811},"391817":{"id":391817,"sourceID":391800,"targetID":391813},"391820":{"id":391820,"sourceID":391809,"targetID":391800},"391821":{"id":391821,"sourceID":391808,"targetID":391812},"391822":{"id":391822,"sourceID":391813,"targetID":391811},"391823":{"id":391823,"sourceID":391815,"targetID":391814}},"notes":{"391792":{"id":391792,"x":776,"y":149,"width":419,"height":40,"text":"This is a \"type 2\" dimension update.\nIt always creates a new row if anything has changed.","colour":"00ce4f"},"391793":{"id":391793,"x":1587,"y":197,"width":364,"height":252,"text":"It is important that you do **not** insert and update the actual dimension table here. If you do add both a Table Update and a Table Output, multiple DML statements are generated and the results can be non deterministic.\n\nInstead, persist the intermediate results and continue with part 2.\n\nFor more information and background on this, please refer to\n[[https://www.matillion.com/resources/developer-relations/developing-workflows-in-matillion-etl]]\n","colour":"f9c21b"},"391794":{"id":391794,"x":714,"y":412,"width":176,"height":96,"text":"This is the existing data","colour":"00ce4f"},"391795":{"id":391795,"x":715,"y":257,"width":175,"height":104,"text":"This is the new data","colour":"00ce4f"},"391798":{"id":391798,"x":937,"y":256,"width":319,"height":105,"text":"It is important to make sure the intended primary key is unique, otherwise it can break the following change detection","colour":"f9c21b"}},"noteConnectors":{},"variables":{},"grids":{}},"info":{"name":"example scd type 2 update part 1","description":null,"type":"TRANSFORMATION","tag":"24087a52-f77e-40ad-9ad5-dacc07fa7b62"}}